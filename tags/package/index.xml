<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>package | Kevin Rue-Albrecht</title>
    <link>/tags/package/</link>
      <atom:link href="/tags/package/index.xml" rel="self" type="application/rss+xml" />
    <description>package</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>Â© Kevin Rue-Albrecht 2019-2020</copyright><lastBuildDate>Sun, 24 May 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/img/android-chrome-512x512.png</url>
      <title>package</title>
      <link>/tags/package/</link>
    </image>
    
    <item>
      <title>BiocPkgTools</title>
      <link>/post/biocpkgtools/</link>
      <pubDate>Sun, 24 May 2020 00:00:00 +0000</pubDate>
      <guid>/post/biocpkgtools/</guid>
      <description>
&lt;script src=&#34;/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;div id=&#34;motivation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Motivation&lt;/h2&gt;
&lt;p&gt;There are currently 5,624, broken down as follows:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Repository&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Packages&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;AnnotationData&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2,649&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;ExperimentData&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;809&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Software&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2,166&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;In an effort to motivate myself to keep an eye out for interesting packages - both new and old - I have used the &lt;em&gt;&lt;a href=&#34;https://bioconductor.org/packages/3.12/BiocPkgTools&#34;&gt;BiocPkgTools&lt;/a&gt;&lt;/em&gt; package to develop a website updated daily and feature packages selected randomly from each repository.&lt;/p&gt;
&lt;p&gt;I have then set up a &lt;a href=&#34;https://github.com/kevinrue/BiocRoulette/actions&#34;&gt;GitHub Action&lt;/a&gt; executed as a CRON job to update the website daily.&lt;/p&gt;
&lt;p&gt;The result is accessible at: &lt;a href=&#34;https://kevinrue.github.io/BiocRoulette/&#34; class=&#34;uri&#34;&gt;https://kevinrue.github.io/BiocRoulette/&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;example-usage&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Example usage&lt;/h2&gt;
&lt;p&gt;Below, I include a bit of code that I wrote while developing the website, to illustrate the process.&lt;/p&gt;
&lt;p&gt;First, the packages that I used to fetch, process, and visualise the data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(BiocPkgTools)
library(tidyverse)
library(cowplot)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then I fetch the data using &lt;code&gt;BiocPkgTools::biocDownloadStats()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;download_stats &amp;lt;- biocDownloadStats()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next, I subset the download stats to a given repository.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;software_stats &amp;lt;- download_stats %&amp;gt;% filter(repo == &amp;quot;Software&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, I identify the latest complete month with data in the download statistics.
To do that, I look for the latest month with non-zero download statistics, and I take the month before that one.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;latest_full_date &amp;lt;- software_stats %&amp;gt;% 
  group_by(Date) %&amp;gt;% 
  summarise(Nb_of_downloads = sum(Nb_of_downloads)) %&amp;gt;% 
  filter(Nb_of_downloads &amp;gt; 0) %&amp;gt;% 
  arrange(desc(Date)) %&amp;gt;% 
  head(2) %&amp;gt;% 
  tail(1) %&amp;gt;% 
  pull(Date)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## `summarise()` ungrouping output (override with `.groups` argument)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;software_monthly_stats &amp;lt;- software_stats %&amp;gt;% 
  filter(Date == latest_full_date)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I wanted to give an edge to packages more frequently downloaded, but without being overwhelmed by core packages that have excessively large download statistics.&lt;/p&gt;
&lt;p&gt;To do so, I visualised the distribution of download stats, and I chose to weigh packages by the &lt;code&gt;log(x+1)&lt;/code&gt; transformation of the number of distinct IP addresses in their download statistics.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gg_dl &amp;lt;- ggplot(software_monthly_stats) +
  geom_histogram(aes(Nb_of_downloads)) +
  theme_cowplot()
gg_dl_log &amp;lt;- ggplot(software_monthly_stats) +
  geom_histogram(aes(log(Nb_of_downloads+1))) +
  theme_cowplot()
gg_ip &amp;lt;- ggplot(software_monthly_stats) +
  geom_histogram(aes(Nb_of_distinct_IPs)) +
  theme_cowplot()
gg_ip_log &amp;lt;- ggplot(software_monthly_stats) +
  geom_histogram(aes(log(Nb_of_distinct_IPs+1))) +
  theme_cowplot()
plot_grid(gg_dl, gg_dl_log, gg_ip, gg_ip_log)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-24-biocpkgtools/index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Finally, I set the random seed using the date of the day, and I randomly sample a package from the table, using the weight described above.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(as.numeric(Sys.Date()))
software_monthly_stats %&amp;gt;% 
  sample_n(size = 1, replace = FALSE, weight = log(Nb_of_distinct_IPs + 1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 7
##   Package     Year Month Nb_of_distinct_IPs Nb_of_downloads repo     Date      
##   &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;              &amp;lt;int&amp;gt;           &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;    &amp;lt;date&amp;gt;    
## 1 metabomxtr  2020 May                   52             115 Software 2020-05-01&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
