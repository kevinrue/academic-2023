<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>leaflet | Kevin Rue-Albrecht</title>
    <link>/tags/leaflet/</link>
      <atom:link href="/tags/leaflet/index.xml" rel="self" type="application/rss+xml" />
    <description>leaflet</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>Â© Kevin Rue-Albrecht 2019-2021</copyright><lastBuildDate>Sun, 05 Apr 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/img/android-chrome-512x512.png</url>
      <title>leaflet</title>
      <link>/tags/leaflet/</link>
    </image>
    
    <item>
      <title>Making a map of COVID-19 cases</title>
      <link>/post/making-a-map-of-covid-19-cases/</link>
      <pubDate>Sun, 05 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/making-a-map-of-covid-19-cases/</guid>
      <description>
&lt;script src=&#34;/post/making-a-map-of-covid-19-cases/index_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/making-a-map-of-covid-19-cases/index_files/font-awesome/css/all.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;/post/making-a-map-of-covid-19-cases/index_files/font-awesome/css/v4-shims.css&#34; rel=&#34;stylesheet&#34; /&gt;


&lt;div id=&#34;overview&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;I have added an &lt;a href=&#34;/COVID-19-website/csse_covid_19_map_latest.html&#34;&gt;interactive world map&lt;/a&gt; to my COVID-19 website using the &lt;code&gt;leaflet&lt;/code&gt; package.&lt;/p&gt;
&lt;p&gt;Using my existing data preprocessing setup, it was incredibly easy to set up the interactive map!
This includes a popup that displays the latest information for the corresponding country.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;leaflet(plot_data) %&amp;gt;%
  addTiles() %&amp;gt;% 
  addProviderTiles(providers$Esri.WorldImagery, group = &amp;quot;World Imagery&amp;quot;) %&amp;gt;%
  addProviderTiles(providers$Stamen.TonerLite, group = &amp;quot;Toner Lite&amp;quot;) %&amp;gt;%
  addCircles(
    lng = ~Longitude, lat = ~Latitude, weight = 1,
    radius = ~log(Deaths + 1) * radius_multiplier,
    popup = sprintf(
    paste(
      &amp;quot;&amp;lt;strong&amp;gt;%s&amp;lt;/strong&amp;gt;&amp;quot;,
      &amp;quot;&amp;lt;i&amp;gt;%s&amp;lt;/i&amp;gt;&amp;quot;,
      &amp;quot;Confirmed cases: %s&amp;quot;,
      &amp;quot;Active cases: %s&amp;quot;,
      &amp;quot;Death: %s&amp;quot;,
      &amp;quot;Recovered: %s&amp;quot;,
      sep = &amp;quot;&amp;lt;/br&amp;gt;&amp;quot;),
    format(plot_data$Date, &amp;quot;%a %b %d&amp;quot;),
    plot_data$`Country/Region`,
    format(plot_data$Confirmed, big.mark = &amp;quot;,&amp;quot;),
    format(plot_data$Active, big.mark = &amp;quot;,&amp;quot;),
    format(plot_data$Deaths, big.mark = &amp;quot;,&amp;quot;),
    format(plot_data$Recovered, big.mark = &amp;quot;,&amp;quot;))
  )&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;a-tweak&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;A tweak&lt;/h2&gt;
&lt;p&gt;The one tweak I pulled is to automatically adjust the multiplier controlling the radius of each circle as a function of the death toll.
The multiplier is computed so that the largest circle on the map has a radius of 200 kilometers.
All other circles are resized proportionally using the same multiplier.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;radius_multiplier &amp;lt;- 2E5 / max(sqrt(plot_data$Deaths), na.rm = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Links&lt;/h2&gt;
&lt;table&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;World map&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;a href=&#34;/COVID-19-website/csse_covid_19_map_latest.html&#34;&gt;COVID-19-website&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Code&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;i class=&#34;fa fa-github&#34;&gt;&lt;/i&gt; &lt;a href=&#34;https://github.com/kevinrue/COVID-19-website/blob/master/csse_covid_19_map_latest.Rmd&#34;&gt;kevinrue/COVID-19-website&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;leaflet&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;a href=&#34;https://rstudio.github.io/leaflet&#34; class=&#34;uri&#34;&gt;https://rstudio.github.io/leaflet&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;thanks-for-reading&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Thanks for reading!&lt;/h2&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
